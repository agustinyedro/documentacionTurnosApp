import{_ as e,c as i,ag as s,o as t}from"./chunks/framework.DlSWhodE.js";const u=JSON.parse('{"title":"Aplicación de Asistencia a Turnos","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"api-examples.md","filePath":"api-examples.md","lastUpdated":1737511046000}'),n={name:"api-examples.md"};function o(l,a,r,d,c,p){return t(),i("div",null,a[0]||(a[0]=[s(`<p><strong>Archivo 1: Introducción</strong></p><h1 id="aplicacion-de-asistencia-a-turnos" tabindex="-1">Aplicación de Asistencia a Turnos <a class="header-anchor" href="#aplicacion-de-asistencia-a-turnos" aria-label="Permalink to &quot;Aplicación de Asistencia a Turnos&quot;">​</a></h1><h2 id="resumen" tabindex="-1">Resumen <a class="header-anchor" href="#resumen" aria-label="Permalink to &quot;Resumen&quot;">​</a></h2><p>La aplicación es una herramienta de asistencia para turnos en un consultorio médico. Permite a los pacientes programar turnos con sus médicos, mientras que el personal del consultorio puede gestionar la disponibilidad y realizar notificaciones de WhatsApp.</p><h3 id="caracteristicas-clave" tabindex="-1">Características clave: <a class="header-anchor" href="#caracteristicas-clave" aria-label="Permalink to &quot;Características clave:&quot;">​</a></h3><ul><li>Programación de turnos con paciencia</li><li>Gestión de disponibilidad para personal del consultorio</li><li>Notificación de WhatsApp al paciente</li></ul><p><strong>Archivo 2: Configuración</strong></p><h2 id="configuracion-del-entorno" tabindex="-1">Configuración del Entorno <a class="header-anchor" href="#configuracion-del-entorno" aria-label="Permalink to &quot;Configuración del Entorno&quot;">​</a></h2><p>La aplicación requiere las siguientes variables de entorno configuradas:</p><table tabindex="0"><thead><tr><th>VARIABLE</th><th>VALOR</th></tr></thead><tbody><tr><td>COUNTRY_CODE</td><td>Código de país (por ejemplo, 54 para Argentina)</td></tr><tr><td>HOST</td><td>Dirección del servidor</td></tr><tr><td>PORTDB</td><td>Puerto del servidor de base de datos</td></tr><tr><td>USER</td><td>Usuario de conexión a la base de datos</td></tr><tr><td>PASSWORD</td><td>Contraseña de usuario de conexión a la base de datos</td></tr><tr><td>DATABASE</td><td>Nombre de la base de datos</td></tr></tbody></table><p><strong>Archivo 3: Archivos y estructura</strong></p><h2 id="estructura-del-proyecto" tabindex="-1">Estructura del Proyecto <a class="header-anchor" href="#estructura-del-proyecto" aria-label="Permalink to &quot;Estructura del Proyecto&quot;">​</a></h2><h3 id="la-aplicacion-se-encuentra-organizada-en-los-siguientes-archivos" tabindex="-1">La aplicación se encuentra organizada en los siguientes archivos: <a class="header-anchor" href="#la-aplicacion-se-encuentra-organizada-en-los-siguientes-archivos" aria-label="Permalink to &quot;La aplicación se encuentra organizada en los siguientes archivos:&quot;">​</a></h3><ul><li><code>controllers:</code> Contiene las rutas de control para la aplicación.</li><li><code>models:</code> Contiene las definiciones de modelos para la base de datos.</li><li><code>utils:</code> Contiene funciones útiles para la aplicación.</li><li><code>index.html:</code> La página inicial de la aplicación.</li></ul><p><strong>Archivo 4: Funcionalidad del Servidor</strong></p><h2 id="creacion-de-un-turno" tabindex="-1">Creación de un turno <a class="header-anchor" href="#creacion-de-un-turno" aria-label="Permalink to &quot;Creación de un turno&quot;">​</a></h2><p>La función crearTurno en el archivo controllers/turnos.js permite crear un nuevo turno con los siguientes parámetros:</p><table tabindex="0"><thead><tr><th>PARÁMETRO</th><th>TIPO</th><th>DESCRIPCIÓN</th></tr></thead><tbody><tr><td>id_paciente</td><td>String Identificador del paciente.</td><td></td></tr><tr><td>fecha</td><td>Date Fecha de la cita.</td><td></td></tr><tr><td>hora</td><td>Time Hora de la cita.</td><td></td></tr><tr><td>id_tratamiento</td><td>String Identificador del tratamiento.</td><td></td></tr><tr><td>d_consultorio</td><td>String Identificador del consultorio.</td><td></td></tr></tbody></table><p>La función devuelve un mensaje de creación exitosa si el turno se crea correctamente, o un error si no.</p><p><strong>Archivo 5: Funcionalidad del WhatsApp</strong></p><h2 id="enviar-mensajes" tabindex="-1">Enviar mensajes <a class="header-anchor" href="#enviar-mensajes" aria-label="Permalink to &quot;Enviar mensajes&quot;">​</a></h2><p>La función sendMessage en el archivo controllers/whatsapp.js permite enviar un mensaje a un paciente mediante WhatsApp. Requiere la conexión con el cliente de WhatsApp y los datos necesarios para personalizar el mensaje.</p><table tabindex="0"><thead><tr><th>PARÁMETRO</th><th>TIPO</th><th>DESCRIPCIÓN</th></tr></thead><tbody><tr><td>mensajeBase</td><td>String</td><td>Mensaje base para personalizar.</td></tr><tr><td>turnoData</td><td>Objeto</td><td>Datos del turno para personalizar el mensaje.</td></tr></tbody></table><p>La función envía el mensaje al paciente y devuelve un mensaje de éxito si se envía correctamente, o un error si no.</p><p><strong>Archivo 6: Aplicación Completa</strong></p><p>Uso de la Aplicación Para utilizar la aplicación, sigue los siguientes pasos:</p><ol><li>Conecta con el servidor utilizando las credenciales de conexión proporcionadas.</li><li>Crea un nuevo turno en la base de datos utilizando la función crearTurno.</li><li>Envia un mensaje al paciente mediante WhatsApp utilizando la función sendMessage.</li></ol><p><strong>Archivo 7: Package.json</strong></p><h2 id="proyecto-pevn-be" tabindex="-1">Proyecto: pevn-be <a class="header-anchor" href="#proyecto-pevn-be" aria-label="Permalink to &quot;Proyecto: pevn-be&quot;">​</a></h2><h3 id="descripcion" tabindex="-1">Descripción <a class="header-anchor" href="#descripcion" aria-label="Permalink to &quot;Descripción&quot;">​</a></h3><p><strong>pevn-be</strong> es una aplicación backend desarrollada con Node.js que utiliza diversas herramientas para gestionar su funcionamiento y despliegue.</p><h2 id="informacion-del-proyecto" tabindex="-1">Información del Proyecto <a class="header-anchor" href="#informacion-del-proyecto" aria-label="Permalink to &quot;Información del Proyecto&quot;">​</a></h2><ul><li><strong>Nombre:</strong> pevn-be</li><li><strong>Versión:</strong> 1.0.0</li><li><strong>Autor:</strong> (pendiente de completar)</li><li><strong>Licencia:</strong> ISC</li></ul><h2 id="scripts-disponibles" tabindex="-1">Scripts Disponibles <a class="header-anchor" href="#scripts-disponibles" aria-label="Permalink to &quot;Scripts Disponibles&quot;">​</a></h2><p>Los siguientes scripts están definidos en el archivo <code>package.json</code>:</p><h3 id="desarrollo" tabindex="-1">Desarrollo <a class="header-anchor" href="#desarrollo" aria-label="Permalink to &quot;Desarrollo&quot;">​</a></h3><ul><li><p><code>dev</code>: Inicia la aplicación utilizando <code>nodemon</code> para recargar automáticamente los cambios.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div></li><li><p><code>babel</code>: Ejecuta la aplicación con <code>babel-node</code> a través de <code>nodemon</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> babel</span></span></code></pre></div></li></ul><h3 id="construccion-y-produccion" tabindex="-1">Construcción y Producción <a class="header-anchor" href="#construccion-y-produccion" aria-label="Permalink to &quot;Construcción y Producción&quot;">​</a></h3><ul><li><p><code>build</code>: Compila los archivos del proyecto a JavaScript compatible utilizando Babel, excluyendo <code>node_modules</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div></li><li><p><code>start</code>: Inicia la aplicación desde la carpeta <code>dist</code> después de la compilación.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div></li></ul><h3 id="gestion-con-pm2" tabindex="-1">Gestión con PM2 <a class="header-anchor" href="#gestion-con-pm2" aria-label="Permalink to &quot;Gestión con PM2&quot;">​</a></h3><ul><li><p><code>pm2:start</code>: Inicia la aplicación con PM2 y asigna el nombre &quot;mi-backend&quot; al proceso.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2:start</span></span></code></pre></div></li><li><p><code>pm2:restart</code>: Reinicia la aplicación gestionada por PM2.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2:restart</span></span></code></pre></div></li><li><p><code>pm2:stop</code>: Detiene la aplicación gestionada por PM2.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2:stop</span></span></code></pre></div></li><li><p><code>pm2:logs</code>: Muestra los registros de la aplicación gestionada por PM2.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2:logs</span></span></code></pre></div></li><li><p><code>pm2:monit</code>: Muestra información en tiempo real de la aplicación gestionada por PM2.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2:monit</span></span></code></pre></div></li></ul><h2 id="dependencias" tabindex="-1">Dependencias <a class="header-anchor" href="#dependencias" aria-label="Permalink to &quot;Dependencias&quot;">​</a></h2><p>El proyecto utiliza las siguientes dependencias:</p><ul><li><strong>chrome-aws-lambda:</strong> <code>^10.1.0</code></li><li><strong>connect-history-api-fallback:</strong> <code>^2.0.0</code></li><li><strong>cors:</strong> <code>^2.8.5</code></li><li><strong>date-fns:</strong> <code>^4.1.0</code></li><li><strong>dotenv:</strong> <code>^16.4.7</code></li><li><strong>express:</strong> <code>^4.21.0</code></li><li><strong>express-fileupload:</strong> <code>^1.5.1</code></li><li><strong>fileupload:</strong> <code>^1.0.0</code></li><li><strong>moment:</strong> <code>^2.30.1</code></li><li><strong>morgan:</strong> <code>^1.10.0</code></li><li><strong>pg:</strong> <code>^8.13.1</code></li><li><strong>puppeteer-core:</strong> <code>^10.4.0</code></li><li><strong>qrcode:</strong> <code>^1.5.4</code></li><li><strong>qrcode-terminal:</strong> <code>^0.12.0</code></li><li><strong>whatsapp-web.js:</strong> <code>^1.26.0</code></li></ul><h2 id="dependencias-de-desarrollo" tabindex="-1">Dependencias de Desarrollo <a class="header-anchor" href="#dependencias-de-desarrollo" aria-label="Permalink to &quot;Dependencias de Desarrollo&quot;">​</a></h2><p>Estas son las herramientas utilizadas en el entorno de desarrollo:</p><ul><li><strong>@babel/cli:</strong> <code>^7.26.4</code></li><li><strong>@babel/core:</strong> <code>^7.26.0</code></li><li><strong>@babel/node:</strong> <code>^7.26.0</code></li><li><strong>@babel/preset-env:</strong> <code>^7.26.0</code></li><li><strong>nodemon:</strong> <code>^3.1.9</code></li></ul><h2 id="instalacion" tabindex="-1">Instalación <a class="header-anchor" href="#instalacion" aria-label="Permalink to &quot;Instalación&quot;">​</a></h2><ol><li><p>Clona este repositorio.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">repositorio-ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div></li><li><p>Instala las dependencias.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div></li><li><p>Configura las variables de entorno en un archivo <code>.env</code>.</p></li></ol><h2 id="uso" tabindex="-1">Uso <a class="header-anchor" href="#uso" aria-label="Permalink to &quot;Uso&quot;">​</a></h2><ol><li><p>Para iniciar en modo desarrollo:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div></li><li><p>Para construir y ejecutar en producción:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div></li><li><p>Para gestionar la aplicación con PM2, utiliza los scripts correspondientes.</p></li></ol>`,51)]))}const g=e(n,[["render",o]]);export{u as __pageData,g as default};
